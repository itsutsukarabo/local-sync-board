# 要件定義書 (System Requirements Specification)

## 1. システムの目的
複数のスマートフォン間で、ゲームの進行状況（スコア、ステータス）をインターネット経由でリアルタイム共有する。

## 2. スコープ定義

### 2.1 In Scope (対象範囲)
* **インターネット通信:** Wi-Fi または モバイルデータ通信を利用。
* **ルーム管理:**
    * 親機によるルーム作成（Room ID生成）。
    * 子機によるRoom ID入力（またはQR読み取り）での参加。
* **ボード作成 (Builder):** 親機によるUI配置、変数定義、計算ロジックの定義。
* **リアルタイム同期:** Supabase Realtimeを利用したミリ秒単位の状態反映。
* **匿名利用:** アカウント登録不要で、アプリを開けばすぐ使える（匿名認証）。

### 2.2 Out of Scope (対象外)
* **完全オフライン動作:** 圏外では動作しない（エラー表示を行う）。
* **複雑な権限管理:** ルーム内のユーザーは善意のプレイヤーであると仮定し、厳密なチート対策は行わない。
* **過去ログの永続保存:** ゲーム終了後、一定期間でルームデータは削除される（エフェメラルな利用）。

## 3. 機能要件 (Functional Requirements)

* **[FR-01] ルーム作成と接続:**
    * 親機はユニークな「Room ID」を発行する。
    * 子機はそのIDを入力することで、特定のセッション（DBの行）を購読(Subscribe)する。
* **[FR-02] ボードテンプレート:**
    * 親機は「麻雀用」「ボードゲーム用」などの設定をJSON形式でDBに保存し、呼び出せること。
* **[FR-03] 状態同期:**
    * 誰かが数値を更新したら、即座に全員の画面に反映されること（Supabase Realtime）。
* **[FR-04] データ永続化:**
    * アプリをタスクキルしても、サーバー上にデータがある限り復帰できること。
